---
title: Progressive Enhancement
url: /patterns/layer-integration/progressive-enhancement
---

<HowItHelps>

## How it helps

Progressive enhancement allows you to start with a lightweight solution and add complexity only when needed, improving performance and maintainability.

### Benefits:
1. **Faster initial load**: Start with vanilla JS for immediate interactivity
2. **Gradual complexity**: Add frameworks only where needed
3. **Better performance**: Minimize JavaScript bundle size
4. **Graceful degradation**: Works even if enhanced features fail

<DefinitionTable>

### Use when you need to:

**Optimize performance**: When initial page load speed is critical, start with vanilla JS and enhance specific areas with React or ExtJS as needed.

**Support legacy browsers**: Vanilla JS base ensures functionality even in older browsers, with progressive enhancement for modern features.

**Reduce complexity**: Start simple and add complexity only where it provides clear value.

</DefinitionTable>
</HowItHelps>

<Usage>

## Using this pattern

This pattern demonstrates starting with vanilla JS and progressively enhancing with React components.

```javascript {"type":"livePreview","id":"progressive-enhancement","title":"Progressive Enhancement Pattern"}
// Initial HTML structure
const html = `
  <div id="product-list" class="cin7-vanilla-list">
    <div class="list-header">
      <h2>Products</h2>
      <button class="enhance-button" data-enhance="true">
        Add Product
      </button>
    </div>
    <div class="list-content">
      <!-- Initial server-rendered content -->
      <div class="product-item">Product 1 - $29.99</div>
      <div class="product-item">Product 2 - $49.99</div>
    </div>
  </div>
`;

// Step 1: Vanilla JS for basic functionality
import { $, on } from '@cin7/vanilla-js';

function initializeBasicInteractions() {
  // Simple click handler
  const button = $('.enhance-button');
  on(button, 'click', () => {
    const shouldEnhance = button.dataset.enhance === 'true';
    
    if (shouldEnhance) {
      // Enhance with React when user interacts
      enhanceWithReact();
    } else {
      // Basic functionality
      addProductBasic();
    }
  });
}

// Step 2: Basic functionality without framework
function addProductBasic() {
  const listContent = $('.list-content');
  const newProduct = document.createElement('div');
  newProduct.className = 'product-item';
  newProduct.textContent = `Product ${Date.now()} - $${Math.random() * 100}`;
  listContent.appendChild(newProduct);
}

// Step 3: Progressive enhancement with React
async function enhanceWithReact() {
  // Lazy load React components
  const { ProductList } = await import('./ProductList');
  const React = await import('react');
  const ReactDOM = await import('react-dom/client');
  
  // Get existing data
  const existingProducts = Array.from(
    document.querySelectorAll('.product-item')
  ).map(el => ({
    name: el.textContent.split(' - ')[0],
    price: el.textContent.split(' - ')[1]
  }));
  
  // Replace with React component
  const container = $('#product-list');
  const root = ReactDOM.createRoot(container);
  
  root.render(
    <ProductList initialProducts={existingProducts} />
  );
}

// React component (loaded on demand)
function ProductList({ initialProducts }) {
  const [products, setProducts] = useState(initialProducts);
  const [showModal, setShowModal] = useState(false);
  
  const handleAddProduct = (product) => {
    setProducts([...products, product]);
    setShowModal(false);
  };
  
  return (
    <Page title="Products">
      <Layout>
        <Layout.Section>
          <Card>
            <Card.Section>
              <Stack distribution="equalSpacing">
                <Text variant="headingMd">Products</Text>
                <Button onClick={() => setShowModal(true)}>
                  Add Product
                </Button>
              </Stack>
            </Card.Section>
            <Card.Section>
              <ResourceList
                items={products}
                renderItem={(product) => (
                  <ResourceList.Item>
                    <Stack distribution="equalSpacing">
                      <Text>{product.name}</Text>
                      <Text>{product.price}</Text>
                    </Stack>
                  </ResourceList.Item>
                )}
              />
            </Card.Section>
          </Card>
        </Layout.Section>
      </Layout>
      
      {showModal && (
        <Modal
          open={showModal}
          onClose={() => setShowModal(false)}
          title="Add Product"
        >
          <Modal.Section>
            <ProductForm onSubmit={handleAddProduct} />
          </Modal.Section>
        </Modal>
      )}
    </Page>
  );
}

// Initialize on page load
document.addEventListener('DOMContentLoaded', initializeBasicInteractions);
```

## Implementation Steps

### 1. Start with Server-Rendered HTML
```html
<div id="app" class="cin7-enhanced">
  <!-- Server-rendered content -->
</div>
```

### 2. Add Vanilla JS Interactions
```javascript
import { $, on } from '@cin7/vanilla-js';

// Immediate interactivity
on($('#app'), 'click', '.action-button', (e) => {
  // Handle click
});
```

### 3. Detect Enhancement Need
```javascript
function shouldEnhance() {
  // Check for complex interaction needs
  return hasComplexForm || needsRealtimeUpdates || userPreference;
}
```

### 4. Lazy Load and Enhance
```javascript
if (shouldEnhance()) {
  import('./EnhancedComponent').then(({ EnhancedComponent }) => {
    // Replace vanilla with React/ExtJS
  });
}
```

## Best Practices

1. **Measure Performance**: Use metrics to decide when to enhance
2. **Preserve State**: Transfer state when upgrading components
3. **Graceful Fallback**: Ensure basic functionality always works
4. **User Choice**: Let users opt into enhanced experiences

## Common Pitfalls

- **Over-engineering**: Don't enhance if vanilla JS is sufficient
- **State Loss**: Preserve user state during enhancement
- **Loading States**: Show feedback during enhancement
- **Bundle Size**: Monitor the cost of enhancement

</Usage>